window.__require=function e(c,t,n){function r(i,a){if(!t[i]){if(!c[i]){var o=i.split("/");if(o=o[o.length-1],!c[o]){var h="function"==typeof __require&&__require;if(!a&&h)return h(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+i+"'")}}var d=t[i]={exports:{}};c[i][0].call(d.exports,function(e){return r(c[i][1][e]||e)},d,d.exports,e,c,t,n)}return t[i].exports}for(var s="function"==typeof __require&&__require,i=0;i<n.length;i++)r(n[i]);return r}({closebtn:[function(e,c,t){"use strict";cc._RF.push(c,"3f800jFzNZCorKoTLv2aj7d","closebtn"),cc.Class({extends:cc.Component,properties:{},onClick:function(){this.node.parent.destroy()},start:function(){}}),cc._RF.pop()},{}],pausebtn:[function(e,c,t){"use strict";cc._RF.push(c,"8af4cNhPF1EcJQwYpbfO0Y3","pausebtn"),cc.Class({extends:cc.Component,properties:{topprefab:{default:null,type:cc.Prefab}},onLoad:function(){this.ispaused=!1,this.node.on("touchOne",this.onTouch,this)},onTouch:function(){this.ispaused&&(this.ispaused=!1,cc.find("Canvas/top").destroy(),cc.find("Canvas/scores").x=0)},onClick:function(){if(this.ispaused){this.ispaused=!1,(e=cc.find("Canvas/top")).destroy(),cc.find("Canvas/scores").x=0}else{this.ispaused=!0,cc.find("Canvas/scores").x-=220;var e=cc.instantiate(this.topprefab);this.node.parent.addChild(e)}}}),cc._RF.pop()},{}],rankbtn:[function(e,c,t){"use strict";cc._RF.push(c,"7171fhxAYJEj4CoSDX/WJSu","rankbtn"),cc.Class({extends:cc.Component,properties:{rankPrefab:{default:null,type:cc.Prefab}},onClick:function(){var e=cc.instantiate(this.rankPrefab);cc.find("Canvas").addChild(e)},start:function(){}}),cc._RF.pop()},{}],rank:[function(e,c,t){"use strict";cc._RF.push(c,"4b955qwxjhDtLc8MEKgbS7S","rank"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){var e=this;FBInstant.getLeaderboardAsync("eliminateRank").then(function(e){return e.getConnectedPlayerEntriesAsync(5,0)}).then(function(c){for(var t=0;t<c.length;t++){var n=e.node.getChildByName("RankBG_"+(t+1)),r=n.getChildByName("rankLabel"),s=n.getChildByName("nameLabel"),i=n.getChildByName("scoreLabel"),a=r.getComponent(cc.Label),o=s.getComponent(cc.Label),h=i.getComponent(cc.Label);a.string=c[t].getRank(),o.string=c[t].getPlayer().getName(),h.string=c[t].getScore()}}).catch(function(e){return console.error(e)})},start:function(){}}),cc._RF.pop()},{}],restartbtn:[function(e,c,t){"use strict";cc._RF.push(c,"8af55DNK5JPzrdbFkFQg2KG","restartbtn"),cc.Class({extends:cc.Component,properties:{},onClick:function(){cc.director.loadScene("game")},start:function(){}}),cc._RF.pop()},{}],sharebtn:[function(e,c,t){"use strict";cc._RF.push(c,"3be5229QFRKwZMB1ElJ+1se","sharebtn"),cc.Class({extends:cc.Component,properties:{},onClick:function(){"undefined"!=typeof FBInstant&&FBInstant.shareAsync({intent:"SHARE",image:"data:image/png;base64,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",text:"\u6765\u548c\u6211\u6bd4\u4e00\u6bd4\u5427~",data:{myReplayData:"..."}}).then(function(){})},start:function(){}}),cc._RF.pop()},{}],squareframe:[function(e,c,t){"use strict";cc._RF.push(c,"725feHcFZtKwqpGdIs0gCJG","squareframe");var n=[[0,1,2,3,4,5,6,7],[8,9,10,11,12,13,14,15],[16,17,18,19,20,21,22,23],[24,25,26,27,28,29,30,31],[32,33,34,35,36,37,38,39],[40,41,42,43,44,45,46,47],[48,49,50,51,52,53,54,55],[56,57,58,59,60,61,62,63],[0,8,16,24,32,40,48,56],[1,9,17,25,33,41,49,57],[2,10,18,26,34,42,50,58],[3,11,19,27,35,43,51,59],[4,12,20,27,36,44,52,60],[5,13,21,29,37,45,53,61],[6,14,22,30,38,46,54,62],[7,15,23,31,39,47,55,63]],r=0,s=0;cc.Class({extends:cc.Component,properties:{sideNum:8,sideLength:0,framePic:{default:null,type:cc.SpriteFrame},failPrefab:{default:null,type:cc.Prefab}},checkElimination:function(e){this.addScore(this.curFKLen,!0);for(var c=[],t=0;t<this.frameList.length;t++)this.frameList[t].isHaveFK&&c.push(this.frameList[t].SquareIndex);c.sort(function(e,c){return e-c});var r=[];for(t=0;t<n.length;t++){var s=n[t],i=this.get2AryIntersect(c,s);if(i.length>0)this.check2AryIsEqual(s,i)&&r.push(s)}var a=[],o=0;for(t=0;t<r.length;t++)for(var h=r[t],d=0;d<h.length;d++){var l=h[d];a.push(cc.callFunc(function(){var e=arguments[1];this.frameList[e].isHaveFK=null;var c=this.frameList[e].getChildByName("colorSpr");c&&c.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,2),cc.fadeOut(.5)),cc.removeSelf(!0)))},this,l)),a.push(cc.delayTime(.05)),o++}if(a.length>0){a.push(cc.callFunc(function(){this.isDeleting=!1,this.checkIsLose()},this)),this.isDeleting=!0;var u=cc.sequence(a);this.node.runAction(u),this.addScore(o)}},checkIsLose:function(){if(!this.isDeleting){for(var e=0,c=0;c<3;c++){var t=cc.find("Canvas/get_square_"+(c+1));t.getComponent("square").checkIsLose()?(e++,t.opacity=125):t.opacity=255}if(3==e){var n=cc.instantiate(this.failPrefab);this.node.parent.addChild(n);FBInstant.player.getDataAsync(["hScore"]).then(function(e){e.hScore<r&&FBInstant.player.setDataAsync({hScore:r}).then(FBInstant.getLeaderboardAsync("eliminateRank").then(function(e){return e.setScoreAsync(r)}).then(function(){return console.log("Score saved")}).catch(function(e){return console.error(e)}))})}}},addScore:function(e,c){var t=this.getAddScoreCal(e,c),n=cc.find("Canvas/scores/score/scoreLabel").getComponent(cc.Label);n.string=t+Number(n.string),r=Number(n.string)},getAddScoreCal:function(e,c){var t=e+1;return c?t:2*t},get2AryIntersect:function(e,c){for(var t=[],n=0;n<e.length;n++)for(var r=0;r<c.length;r++)c[r]==e[n]&&t.push(c[r]);return t},check2AryIsEqual:function(e,c){for(var t=0;t<e.length;t++)if(c[t]!=e[t])return!1;return!0},onLoad:function(){cc.view.enableRetina(!0),cc.view.resizeWithBrowserSize(!0);for(var e=cc.v2(this.node.x,this.node.y),c=[],t=[],n=cc.v2(-7*this.sideLength/2,7*this.sideLength/2),r=e.add(n),i=0;i<this.sideNum;i++)for(var a=0;a<this.sideNum;a++){var o=r.add(cc.v2(i*this.sideLength,-a*this.sideLength));t.push(o)}for(var h=0;h<t.length;h++){var d=new cc.Node("frame"),l=d.addComponent(cc.Sprite);l.spriteFrame=this.framePic,l.sizeMode=cc.Sprite.SizeMode.CUSTOM,d.width=this.sideLength,d.height=this.sideLength,d.x=t[h].x,d.y=t[h].y,d.parent=this.node,d.SquareIndex=h,c.push(d)}this.frameList=c,this.fPosList=t,this.isDeleting=!1,this.node.on("succDropDownOne",this.checkElimination,this),FBInstant.player.getDataAsync(["hScore"]).then(function(e){s=e.hScore;var c=cc.find("Canvas/scores/highScore/scoreLabel").getComponent(cc.Label);s>0&&(c.string=s)})}}),cc._RF.pop()},{}],square:[function(e,c,t){"use strict";var n;function r(e,c,t){return c in e?Object.defineProperty(e,c,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[c]=t,e}cc._RF.push(c,"a87c8hi7gJCY68LOGmf83ic","square");var s=e("squareframe");cc.Class({extends:cc.Component,properties:(n={checkerboard:{default:null,type:s},sideLength:0},r(n,"color1",{default:null,type:cc.SpriteFrame}),r(n,"color2",{default:null,type:cc.SpriteFrame}),r(n,"color3",{default:null,type:cc.SpriteFrame}),r(n,"color4",{default:null,type:cc.SpriteFrame}),r(n,"color5",{default:null,type:cc.SpriteFrame}),r(n,"color6",{default:null,type:cc.SpriteFrame}),r(n,"color7",{default:null,type:cc.SpriteFrame}),n),getTheConfig:function(){var e=this.sideLength;return[[cc.v2(0,0)],[cc.v2(0,0),cc.v2(e,0)],[cc.v2(0,0),cc.v2(0,e)],[cc.v2(0,0),cc.v2(e,0),cc.v2(2*e,0)],[cc.v2(0,0),cc.v2(0,e),cc.v2(0,2*e)],[cc.v2(0,0),cc.v2(e,0),cc.v2(e,e)],[cc.v2(0,0),cc.v2(e,0),cc.v2(0,e)],[cc.v2(0,0),cc.v2(0,e),cc.v2(e,e)],[cc.v2(0,e),cc.v2(e,0),cc.v2(e,e)],[cc.v2(0,0),cc.v2(e,0),cc.v2(2*e,0),cc.v2(3*e,0)],[cc.v2(0,0),cc.v2(0,e),cc.v2(0,2*e),cc.v2(0,3*e)],[cc.v2(0,0),cc.v2(e,0),cc.v2(2*e,0),cc.v2(2*e,e)],[cc.v2(0,0),cc.v2(e,0),cc.v2(2*e,0),cc.v2(0,e)],[cc.v2(0,0),cc.v2(e,0),cc.v2(2*e,0),cc.v2(2*e,-e)],[cc.v2(0,0),cc.v2(e,0),cc.v2(2*e,0),cc.v2(0,-e)],[cc.v2(0,0),cc.v2(0,e),cc.v2(0,2*e),cc.v2(e,2*e)],[cc.v2(0,0),cc.v2(0,e),cc.v2(0,2*e),cc.v2(e,0)],[cc.v2(0,0),cc.v2(0,e),cc.v2(0,2*e),cc.v2(-e,2*e)],[cc.v2(0,0),cc.v2(0,e),cc.v2(0,2*e),cc.v2(-e,0)],[cc.v2(0,0),cc.v2(e,0),cc.v2(e,e),cc.v2(0,e)]]},newOneK:function(e){var c=new cc.Node("colorSpr"),t=c.addComponent(cc.Sprite);return t.spriteFrame=this["color"+e],t.sizeMode=cc.Sprite.SizeMode.CUSTOM,c.width=this.sideLength,c.height=this.sideLength,c},newOneNode:function(){for(var e=new cc.Node("square"),c=this.getTheConfig(),t=c[n=Math.floor(Math.random()*c.length)],n=Math.floor(6*Math.random()+1),r=0,s=0,i=0,a=0,o=0;o<t.length;o++){var h=t[o],d=this.newOneK(n);d.x=h.x,r+=d.x,s++,d.y=h.y,i+=d.y,a++,e.addChild(d)}return e.x=-r/s*.5,e.y=-i/a*.5,e.setScale(.5),e},addTouchEvent:function(){var e=this;this.node.ox=this.node.x,this.node.oy=this.node.y,this.node.on(cc.Node.EventType.TOUCH_START,function(){this.y+=100,this.getChildByName("square").setScale(1),cc.find("Canvas/pause").emit("touchOne")},this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(c){var t=c.touch.getDelta();this.x+=t.x,this.y+=t.y,e.collisionFunc(),e.checkIsCanDrop()?e.changeColorDeal():e.changeColorDeal(!0)},this.node),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){this.dropDownFunc()},this),this.node.on(cc.Node.EventType.TOUCH_END,function(e){this.dropDownFunc()},this)},changeColorDeal:function(e){for(var c=0;c<this.checkerboard.frameList.length;c++){(n=(t=this.checkerboard.frameList[c]).getComponent(cc.Sprite)).spriteFrame=this.checkerboard.framePic,t.opacity=255}if(!e)for(c=0;c<this.checkFrameList.length;c++){var t,n=(t=this.checkFrameList[c]).getComponent(cc.Sprite),r=this.checkFKlist[0].getComponent(cc.Sprite);n.spriteFrame=r.spriteFrame,t.opacity=127}},collisionFunc:function(){this.checkFrameList=[],this.checkFKlist=[];for(var e=this.node.children[0].children,c=0;c<e.length;c++){var t=cc.v2(this.node.children[0].x,this.node.children[0].y).add(cc.v2(e[c].x,e[c].y)),n=this.node.position.add(t),r=this.checkPosFunc(n);r&&(this.checkFKlist.push(e[c]),this.checkFrameList.push(r))}},checkPosFunc:function(e){for(var c=this.sideLength/2,t=0;t<this.checkerboard.frameList.length;t++){var n=this.checkerboard.frameList[t];if(cc.v2(n.x,n.y).sub(e).mag()<=c)return n}},checkIsLose:function(){for(var e=0,c=this.node.children[0].children,t=0;t<this.checkerboard.frameList.length;t++){var n=this.checkerboard.frameList[t],r=cc.v2(n.x,n.y),s=1;if(!n.isHaveFK){for(var i=1;i<c.length;i++)for(var a=this.sideLength/2,o=r.add(cc.v2(c[i].x,c[i].y)),h=0;h<this.checkerboard.frameList.length;h++){var d=this.checkerboard.frameList[h];cc.v2(d.x,d.y).sub(o).mag()<=a&&!d.isHaveFK&&s++}s==c.length&&e++}}return 0==e},checkIsCanDrop:function(){if(0==this.checkFrameList.length||this.checkFrameList.length!=this.node.children[0].children.length)return!1;for(var e=0;e<this.checkFrameList.length;e++)if(this.checkFrameList[e].isHaveFK)return!1;return!0},dropDownFunc:function(){if(this.checkIsCanDrop()){for(var e=0;e<this.checkFKlist.length;e++)this.checkFKlist[e].x=0,this.checkFKlist[e].y=0,this.checkFKlist[e].parent=this.checkFrameList[e],this.checkFrameList[e].isHaveFK=!0;this.node.removeAllChildren();var c=this.newOneNode();this.node.addChild(c),this.checkerboard.curFKLen=this.checkFKlist.length,this.checkerboard.node.emit("succDropDownOne"),this.takeBack(),this.checkerboard.checkIsLose()}else this.takeBack()},takeBack:function(){this.checkFrameList=[],this.changeColorDeal(),this.node.getChildByName("square").setScale(.5),this.node.x=this.node.ox,this.node.y=this.node.oy},onLoad:function(){this.checkFrameList=[],this.checkSquareList=[];var e=this.newOneNode();this.node.addChild(e),this.addTouchEvent()}}),cc._RF.pop()},{squareframe:"squareframe"}]},{},["closebtn","pausebtn","rank","rankbtn","restartbtn","sharebtn","square","squareframe"]);